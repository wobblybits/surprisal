<html>
    <head>
        <script src="https://unpkg.com/tone"></script>
        <script>
            const synth = new Tone.Synth().toDestination();

            window.onload = () => {

                const playButton = document.getElementById("playButton");
                playButton.addEventListener("click", () => {
                    synth.triggerAttackRelease("C4", "8n");
                });

                const userInput = document.getElementById("userInput");

                const fetchButton = document.getElementById("fetchButton");
                fetchButton.addEventListener("click", () => {
                    fetchFromBackend(userInput.value);
                });

                function fetchFromBackend(text) {
                    const hello = fetch(`https://surprisal.onrender.com/process/`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                            },
                        body: JSON.stringify({text: text})
                    })
                        .then(response => response.json())
                        .then(data => {
                            document.getElementById("result").innerHTML += JSON.stringify(data) + "<br>";
                        });
                }
                fetchFromBackend("Hello back there!");
            };
        </script>
    </head>
    <body>
        <h1>Index.html</h1>
        <textarea id="userInput" rows="4" cols="50"></textarea>
        <button id="playButton">Play Sound</button>
        <button id="fetchButton">Fetch from Backend</button>
        <div id="result">

        </div>
    </body>
</html>